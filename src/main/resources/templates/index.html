<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Website</title>
  <style>
    /* Reset some default styles */
    body, h1, h2, p, ul, li {
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
    }

    /* Header Styles */
    .logo img {
      margin-top: 10px;
     margin-left: 20px;
      max-width: 150px;
      height: auto;
    }


    #profile-text {
      /* 추가된 스타일 */
      display: inline-block;
      margin-left: 40px;
      color: #000;
      font-weight: bold;
    }
    #profile-text:hover  {
      /* 추가된 스타일 */
      display: inline-block;
      margin-left: 40px;
      color: #fff;
      font-weight: bold;
    }
    /* Container Styles */
    .container {
      display: flex;
      margin: 20px;
    }

    main {
      flex: 3;
      padding: 20px;
      background-color: #fff;
    }
    /* Banner Styles */
    .banner img {
      width: 100%;
      height: auto;
      margin-bottom: 20px;
    }
    .search-bar {
      display: flex;
      align-items: center;
    }
    .search-bar input[type="text"] {
      padding: 10px;
      border: 2px solid lightgray;
      border-radius: 20px;
      width: 500px; /* Adjust the width as needed */
    }
    .search-icon {
      margin-left: -40px;
      padding: 8px;
      background-color: white;
      border-radius: 50%;
      cursor: pointer;
      width: 17px;
      height: 17px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .search-icon img {
      max-width: 90%;
      max-height: 90%;
    }
    /* Contest List Styles */
    .section {
      /* 추가된 스타일 */
      flex: 1;
      padding: 5px;
    }
    .sections-container {
      margin-left: 200px;
      height: 750px;
      display: flex;
      gap: 30px;
      background-color: #fff;
    }
    .section_in{
      background-color: lightgray;
      height: 700px;
    }
    .section-heading {
      margin-top: 1px;
      text-align: center;
    }


    /* Responsive Styles */
    @media screen and (max-width: 768px) {
      .container {
        flex-direction: column;
      }
    }

    ul {
      list-style-type: none;
      padding: 0px;
      margin: 0px;
      width: 200px;
      background: linen;
      height: 100%;
      overflow: auto;
      position: fixed;
    }

    li a {
      margin-top: 20px;
      text-decoration: none;
      padding: 10px;
      display: block;
      color: #000;
      text-align: center;
      font-weight: bold;
    }

    li a:hover {
      background: lightsalmon;
      color: #fff;
    }

    .cd1 {
      margin-left: 20px;
      height: 100px;
      background-color: linen;
    }

    .auth-buttons {
      width: 149px;
      height: 25px;
      margin-left: 10px;
      padding: 8px 16px;
      border: none;
      border-radius: 20px;
      background-color: lightsalmon;
      color: white;
      cursor: pointer;
    }
    .delete-button {
      position: fixed; /* 요소를 화면에 고정 */
      bottom: 50px; /* 아래 여백 조절 */
      right: 50px; /* 오른쪽 여백 조절 */
      z-index: 1; /* 다른 요소 위에 위치하도록 설정 */
      background-color: lightsalmon;
      color: black;
      padding: 10px 20px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-weight: bold;
    }

    .delete-button:hover {
      color: white;
    }
    /* 자유게시판 CSS */
    .post-wrap {
      margin: 20px;
      padding: 20px;
      background-color: #f5f5f5;
      border-radius: 10px;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    }

    .post-title {
      margin-bottom: 20px;
    }

    .post-title strong {
      font-size: 1.3rem;
    }

    .post-title p {
      margin-top: 5px;
      font-size: 0.8rem;
    }

    .post-list {
      width: 100%;
      border-top: 2px solid #000;
    }

    .post-list > div {
      border-bottom: 1px solid #ddd;
      font-size: 0;
    }

    .post-list > div.top {
      border-bottom: 1px solid #999;
    }

    .post-list > div:last-child {
      border-bottom: 1px solid #000;
    }

    .post-list > div > div {
      display: inline-block;
      padding: 15px 0;
      text-align: center;
      font-size: 0.9rem;
    }

    .post-list > div.top > div {
      font-weight: bold;
    }

    .post-list .num {
      width: 10%;
    }

    .post-list .title {
      width: 50%;
      text-align: left;
    }

    .post-list .top .title {
      text-align: center;
    }

    .post-list .writer {
      width: 10%;
    }

    .post-list .date {
      width: 20%;
    }

    .post-list .count {
      width: 10%;
    }

    .post-btn button {
      margin: 5px;
      float: right;
      border: none;
      border-radius: 6px;
      background-color: lightsalmon;
      color: white;
      cursor: pointer;
    }

    .post-page {
      margin-top : 20px;
      text-align: center;
      font-size: 0;
    }

    .post-page a {
      display: inline-block;
      width: 32px;
      height: 32px;
      box-sizing: border-box;
      vertical-align: middle;
      border: 1px solid #ddd;
      border-radius: 7px;
      border-left: 0;
      line-height: 100%;
    }

    .post-page a.bt {
      padding-top: 10px;
      font-size: 1.0rem;
      letter-spacing: -1px;
    }

    .post-page a.num {
      padding-top: 9px;
      font-size: 0.9rem;
    }

    .post-page a.num.on {
      border-color: #000;
      background: #000;
      color: #fff;
    }

    .post-page a:first-child {
      border-left: 1px solid #ddd;
    }
  </style>
  <script>
    // 자유게시판 페이징 출력
    function showPosts(page, size) {
      if(page <= 0) {
        page = 1;
      }

      $.ajax({
        type: 'GET',
        url: `/api/posts?page=${page}&size=${size}`,
      })
              .done(function (response, status, xhr) {
                let pages = response['totalPages'];

                if(page > pages) {
                  page = pages;
                }

                let html = `
                    <div class="post-wrap">
                      <div class="post-title">
                        <strong>자유게시판</strong>
                        <p>자유로운 정보 공유와 공모전을 위한 커뮤니티입니다.</p>
                      </div>
                      <div class="post-list-wrap">
                          <div class="post-list">
                            <div class="top">
                              <div class="num">번호</div>
                              <div class="title">제목</div>
                              <div class="writer">작성자</div>
                              <div class="date">작성일</div>
                              <div class="count">조회수</div>
                            </div>`;

                let startNum = (page-1) * pageSize;
                response['content'].forEach((post) => {
                  startNum += 1;
                  html += `
                        <div>
                          <div class="num">${startNum}</div>
                          <div class="title"><a href="#">${post.title}</a></div>
                          <div class="writer">${post.writer}</div>
                          <div class="date">${post.modifiedDate}</div>
                          <div class="count">${post.communityPostViews}</div>
                        </div>
                    `;
                });

                html += `
                    </div>
                     <div class="post-btn">
                       <button>글쓰기</button>
                     </div>
                     <div class="post-page">
                        <a onclick="showPosts(1,pageSize)" class="bt first"><<</a>
                        <a onclick="showPosts(${page}-1,pageSize)" class="bt prev"><</a>
                `;

                let startPage = (Math.floor(page / pageBtnSize) * pageBtnSize) + 1;
                let endPage = (startPage + pageBtnSize) <= pages ? (startPage + pageBtnSize) : pages;

                for(let i=startPage;i<=endPage;i++) {
                  if(page === i) {
                    html += `
                            <a onclick="showPosts(${i},pageSize)" class="num on">${i}</a>
                        `;
                  } else {
                    html += `
                            <a onclick="showPosts(${i},pageSize)" class="num">${i}</a>
                        `;
                  }
                }

                html += `
                            <a onclick="showPosts(${page}+1,pageSize)" class="bt first">></a>
                            <a onclick="showPosts(${pages},pageSize)" class="bt prev">>></a>
                          </div>
                      </div>
                    </div>
                `;
                $(".main").empty();
                $(".main").append(html);
              })
              .fail(function(response) {
                alert("자유게시글 조회 실패");
                console.log(response.responseJSON.msg);
              });
    }
    function logout() {
      let authCookie = getCookie('Authorization');
      console.log(authCookie);
      $.ajax({
        url: 'http://localhost:8080/api/users/logout',
        type: 'POST',
        headers: {
          'Authorization': authCookie
        },
        processData: false,
        contentType: false,
        success: function(response) {

          Cookies.remove('Authorization', {path: '/'}); // 쿠키삭제
          // Cookies.set('Authorization', token, {path: '/', expires: expirationDate});
          // 요청 성공 시 처리할
          alert("로그아웃 성공 !");
          window.location.href = host + '/api/view/user/login';
        },
        error: function(xhr, status, error) {
          console.log(xhr);
          alert("로그아웃 실패 !");
        }
      });
    }
    document.addEventListener('DOMContentLoaded', function () {
      const postMenu = document.querySelector('#post');
      const homeMenu = document.querySelector('#home');
      const reportMenu = document.querySelector('#report-post');
      const contestMenu = document.querySelector('#contest');
      const categoryMenu = document.querySelector('#category');
      const userMenu = document.querySelector('#user');
      const etcMenu = document.querySelector('#etc');

      const homeContainer = document.querySelector('.home.container');
      const postContainer = document.querySelector('.post.container');
      const reportContainer = document.querySelector('.report.container');
      const contestContainer = document.querySelector('.contest.container');
      const categoryContainer = document.querySelector('.category.container');
      const userContainer = document.querySelector('.user.container');
      const etcContainer = document.querySelector('.etc.container');

      postMenu.addEventListener('click', function () {
        homeContainer.style.display = 'none';
        postContainer.style.display = 'block';
        reportContainer.style.display = 'none';
        contestContainer.style.display = 'none';
        categoryContainer.style.display = 'none';
        userContainer.style.display = 'none';
        etcContainer.style.display = 'none';
      });

      homeMenu.addEventListener('click', function () {
        homeContainer.style.display = 'block';
        postContainer.style.display = 'none';
        reportContainer.style.display = 'none';
        contestContainer.style.display = 'none';
        categoryContainer.style.display = 'none';
        userContainer.style.display = 'none';
        etcContainer.style.display = 'none';
      });

      reportMenu.addEventListener('click', function () {
        homeContainer.style.display = 'none';
        postContainer.style.display = 'none';
        reportContainer.style.display = 'block';
        contestContainer.style.display = 'none';
        categoryContainer.style.display = 'none'; // 다른 컨테이너 숨기기
        userContainer.style.display = 'none';
        etcContainer.style.display = 'none';
      });

      contestMenu.addEventListener('click', function () {
        homeContainer.style.display = 'none';
        postContainer.style.display = 'none';
        reportContainer.style.display = 'none';
        contestContainer.style.display = 'block';
        categoryContainer.style.display = 'none'; // 다른 컨테이너 숨기기
        userContainer.style.display = 'none';
        etcContainer.style.display = 'none';
      });

      categoryMenu.addEventListener('click', function () {
        homeContainer.style.display = 'none';
        postContainer.style.display = 'none';
        reportContainer.style.display = 'none';
        contestContainer.style.display = 'none';
        categoryContainer.style.display = 'block';
        userContainer.style.display = 'none';
        etcContainer.style.display = 'none';
      });

      userMenu.addEventListener('click', function () {
        homeContainer.style.display = 'none';
        postContainer.style.display = 'none';
        reportContainer.style.display = 'none';
        contestContainer.style.display = 'none';
        categoryContainer.style.display = 'none';
        userContainer.style.display = 'block';
        etcContainer.style.display = 'none';
      });

      etcMenu.addEventListener('click', function () {
        homeContainer.style.display = 'none';
        postContainer.style.display = 'none';
        reportContainer.style.display = 'none';
        contestContainer.style.display = 'none';
        categoryContainer.style.display = 'none';
        userContainer.style.display = 'none';
        etcContainer.style.display = 'block';
      });
    });

    // 삭제 버튼을 클릭했을 때 실행될 함수
    function deletePost() {
      // 이 부분에 게시물 삭제 로직을 추가하세요.
      // 예를 들어, 선택된 게시물을 삭제하는 AJAX 요청 등을 수행할 수 있습니다.
      // 필요한 경우 서버와 통신하여 삭제 작업을 수행하세요.

      // 여기에 실제 삭제 로직을 추가하세요.
      alert("게시물이 삭제되었습니다."); // 임시로 경고창을 띄움
    }
  </script>
    <script src="/js/post.js"></script>
</head>
<body>
<header>
  <div class="logo">
  <ul>
    <img src="https://i.postimg.cc/T3KxY0gd/2.png" alt="Logo">
    <li><a id="home" href="#">홈</a></li>
    <li><a id="post" href="#" onclick="showPosts(1,pageSize)">최근 게시글</a></li>
    <li><a id="report-post" href="#">신고된 게시글/댓글 관리</a></li>
    <li><a id="contest" href="#">공지 및 공모전 관리</a></li>
    <li><a id="category" href="#">카테고리 관리</a></li>
    <li><a id="user" href="#">유저 관리</a></li>
    <li><a id="etc" href="#">기타 이용약관</a></li>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <div class="auth-buttons">
      <span id="profile-text" href="javascript:logout()">로그아웃</span> </div>
  </ul>
  </div>
  <div class="cd1">
  </div>
</header>

<div class="home container"style="display: block;">
  <main class="sections-container">
    <div class="section">
      <h2 class="section-heading"><&ND> 최근 방문자 수</h2>
      <div class="section_in">
      <h1>이게된다??</h1>
    </div>
    </div>
    <div class="section">
      <h2 class="section-heading">최근 신고된 게시글 추이</h2>
      <div class="section_in">
        <h1>이게된다??</h1>
      </div>
    </div>
  </main>
</div>

<div class="post container" style="display: none;">
  <main class="sections-container">
    <div class="section">
      <h2 class="section-heading">최근 게시글 전체 조회</h2>
      <div class="section_in">
        <div class="search-bar">
          <input type="text" placeholder="게시물 검색">
          <div class="search-icon">
            <img src="https://i.postimg.cc/MT8tf3Qy/searchmagnifierinterfacesymbol-79894.png" alt="Search Icon">
          </div>
        </div>
        <div class="post-list">
          <!-- 게시글 목록이 여기에 추가될 것입니다. -->
        </div>
        <div class="delete-button">
          <a onclick="deletePost()">삭제</a>
        </div>
      </div>
    </div>
  </main>
</div>

<div class="report container" style="display: none;">
  <main class="sections-container">
    <div class="section">
      <h2 class="section-heading">2</h2>
      <div class="section_in">
        <h1>야호!!</h1>
      </div>
    </div>
    <div class="section">
      <h2 class="section-heading">2</h2>
      <div class="section_in">
        <h1>야호!!</h1>
      </div>
    </div>
  </main>
</div>

<div class="contest container" style="display: none;">
  <main class="sections-container">
    <div class="section">
      <h2 class="section-heading">3</h2>
      <div class="section_in">
        <h1>야호~~~~~~~~~~!!</h1>
      </div>
    </div>
    <div class="section">
      <h2 class="section-heading">3</h2>
      <div class="section_in">
        <h1>야호~~~~~~~~~~!!!!</h1>
      </div>
    </div>
  </main>
</div>

<div class="category container" style="display: none;">
  <main class="sections-container">
    <div class="section">
      <h2 class="section-heading">4</h2>
      <div class="section_in">
        <h1>카테고리 crud</h1>
      </div>
    </div>
    <div class="section">
      <h2 class="section-heading">4</h2>
      <div class="section_in">
        <h1>카테고리 crud</h1>
      </div>
    </div>
  </main>
</div>

<div class="user container" style="display: none;">
  <main class="sections-container">
    <div class="section">
      <h2 class="section-heading">5</h2>
      <div class="section_in">
        <h1>유저 crud</h1>
      </div>
    </div>
    <div class="section">
      <h2 class="section-heading">5</h2>
      <div class="section_in">
        <h1>유저 crud</h1>
      </div>
    </div>
  </main>
</div>

<div class="etc container" style="display: none;">
  <main class="sections-container">
    <div class="section">
      <h2 class="section-heading">6</h2>
      <div class="section_in">
        <h1>etc</h1>
      </div>
    </div>
    <div class="section">
      <h2 class="section-heading">6</h2>
      <div class="section_in">
        <h1>etc</h1>
      </div>
    </div>
  </main>
</div>

</body>
</html>